<html>
<head>
  <script src="https://ajax.googleapis.com/ajax/libs/jquery/2.2.0/jquery.min.js"></script>
  <script>
    $(document).ready(function(){
      //console.log("jquery is ready");

      //create a function that will handle requests to SF Open Data API
      //it takes a url parameter to the API and a successCallBack parameter
      //which will be ran upon successful connection to the server
      //it will return a json file of the datat
      function getRequest(requestUrl, successCallBack){
        var request = $.ajax({
          url: requestUrl,
          //data: {"dba_name": $('#a_location').val()},
          method: "GET"
        })
        request.done(successCallBack);
      }

      //getLocations gets the data return from our getRequest
      //it will loop over each business listed return
      //results that match a location that the user inputted
      function getLocations(data) {
        //$("#results").html(data[0].dba_name);
        //console.log(data[0].dba_name);
        //console.log(data);
        var str = "";
        str = str + "<ul>";
        for (var i = 0; i < data.length; i++) {
           str = str + "<li>" + data[i].dba_name + "</li>";
           //console.log(str);
        }
        str = str + "</ul>";
        $("#results").html(str);
      }

      //when a user enters a location and hits the submit button
      //we make a getRequest and return a list of businesses with their
      //locations  for user to choose from
      $('#submit_location').on('click', function(event) {
        var url = "https://data.sfgov.org/resource/vbiu-2p9h.json";
        getRequest(url, getLocations);

        });
    });
  </script>
</head>
<body>
  <h1>Places In San Francisco</h1>
  <h3>Enter a Location</h3>
  <form method="get">
    <input type="text" id="a_location">
    <input type="button" id="submit_location" value="">
  </form>
  <p>Locations</p>
  <div id="results"></div>
</body>
</html>
